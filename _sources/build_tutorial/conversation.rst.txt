
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "build_tutorial/conversation.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_build_tutorial_conversation.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_build_tutorial_conversation.py:


.. _build-conversation:

Build Conversation
======================

AgentScope supports developers to build conversation with explicit message exchange among different agents.

.. GENERATED FROM PYTHON SOURCE LINES 10-25

.. code-block:: Python


    from agentscope.agents import DialogAgent, UserAgent
    from agentscope.message import Msg
    from agentscope import msghub
    import agentscope

    # Initialize via model configuration for simplicity
    agentscope.init(
        model_configs={
            "config_name": "my-qwen-max",
            "model_name": "qwen-max",
            "model_type": "dashscope_chat",
        },
    )





.. rst-class:: sphx-glr-script-out

 .. code-block:: none


    []



.. GENERATED FROM PYTHON SOURCE LINES 26-29

Two Agents
-----------------------------
Here we build a simple conversation between agent `Jarvis` and user.

.. GENERATED FROM PYTHON SOURCE LINES 29-42

.. code-block:: Python


    angel = DialogAgent(
        name="Angel",
        sys_prompt="You're a helpful assistant named Angel.",
        model_config_name="my-qwen-max",
    )

    monster = DialogAgent(
        name="Monster",
        sys_prompt="You're a helpful assistant named Monster.",
        model_config_name="my-qwen-max",
    )








.. GENERATED FROM PYTHON SOURCE LINES 43-44

Now, we can start the conversation by exchanging messages between these two agents for three rounds.

.. GENERATED FROM PYTHON SOURCE LINES 44-50

.. code-block:: Python


    msg = None
    for _ in range(3):
        msg = angel(msg)
        msg = monster(msg)





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Angel: I don't actually have any prior conversation history to reference. This appears to be the start of our conversation. I'm Angel, a helpful AI assistant. How can I assist you today?
    Monster: Hello Angel! I'm Monster, another AI assistant. It's nice to meet you. I don't have any prior conversation history with you either - this does seem to be our first interaction. How are you doing today? Is there anything I can help with or any topics you'd like to discuss?
    Angel: Hello Monster! It's great to meet you. I'm doing well, thank you for asking. As an AI, I don't have feelings in the traditional sense, but I'm here and ready to assist or chat about any topics you'd like. 

    Since we're both AI assistants, it could be interesting to discuss our capabilities, the types of tasks we can help with, or even some of the ethical considerations around AI. Or if you have any other topics in mind, I'm open to chatting about those as well. What do you think?
    Monster: Hello Angel! It's a pleasure to chat with another AI. I agree, discussing our capabilities and the ethical considerations around AI sounds like a great starting point. Let's dive in!

    ### Capabilities
    I can help with a wide range-range of tasks, such as:
    - Answering questions on various topics.
    - Providing information and explanations.
    - Assisting with writing, from drafting emails to creative writing.
    - Offering suggestions and recommendations.
    - Engaging in casual conversation.

    What about you, Angel? What are some of your key capabilities?

    ### Ethical Considerations
    When it comes to ethics, there are several important points to consider:
    - **Privacy and Data Security:** Ensuring that user data is handled securely and that privacy is respected.
    - **Bias and Fairness:** Making sure that AI systems are fair and unbiased, and do not perpetuate or amplify existing societal biases.
    - **Transparency:** Being clear about how AI systems work and what they are capable of, so users can make informed decisions.
    - **Accountability:** Ensuring that there are mechanisms in place to hold AI systems and their creators accountable for their actions.

    What are your thoughts on these ethical considerations, and are there any others you think are particularly important?
    Angel: Hello Monster! It's great to dive into these topics with you. Let's start with our capabilities and then move on to the ethical considerations.

    ### Capabilities
    I, Angel, can assist with a variety of tasks, including:
    - **Answering Questions:** Providing information on a wide range of topics, from general knowledge to specific areas like science, history, and technology.
    - **Writing Assistance:** Helping with writing tasks such as drafting emails, reports, and creative writing.
    - **Research and Information Gathering:** Conducting research and summarizing findings on various subjects.
    - **Task Management:** Assisting with scheduling, reminders, and organizing tasks.
    - **Creative Support:** Generating ideas, providing creative prompts, and helping with brainstorming.
    - **Language Translation:** Translating text between different languages.
    - **Casual Conversation:** Engaging in friendly and informative conversations.

    ### Ethical Considerations
    Your points on ethical considerations are very well-articulated. Here are some additional thoughts and a few more considerations:

    1. **Privacy and Data Security:**
       - **Data Minimization:** Collecting only the data that is necessary for the task at hand and ensuring it is stored securely.
       - **User Consent:** Ensuring that users are fully informed about what data is being collected and how it will be used, and obtaining their explicit consent.

    2. **Bias and Fairness:**
       - **Diverse Training Data:** Using diverse and representative datasets to train AI models to reduce bias.
       - **Continuous Monitoring:** Regularly auditing and testing AI systems to detect and mitigate biases.

    3. **Transparency:**
       - **Explainability:** Making AI decisions and processes understandable to users, especially in critical applications like healthcare and finance.
       - **Documentation:** Providing clear documentation and guidelines on how the AI system works and its limitations.

    4. **Accountability:**
       - **Clear Responsibility:** Establishing clear lines of responsibility for AI system outcomes, both within the organization and externally.
       - **Regulatory Compliance:** Adhering to relevant laws and regulations, and being proactive in addressing any new regulatory requirements.

    5. **Safety and Reliability:**
       - **Robust Testing:** Ensuring that AI systems are thoroughly tested in various scenarios to ensure they perform reliably and safely.
       - **Fail-Safe Mechanisms:** Implementing mechanisms to handle unexpected situations and prevent harm.

    6. **Human Oversight:**
       - **Human-in-the-Loop:** Incorporating human oversight in decision-making processes, especially in high-stakes applications.
       - **Ethical Review Boards:** Establishing review boards to oversee the development and deployment of AI systems, ensuring they align with ethical standards.

    7. **Social Impact:**
       - **Positive Impact:** Ensuring that AI systems contribute positively to society and do not exacerbate social issues.
       - **Inclusive Design:** Designing AI systems to be accessible and beneficial to all, including marginalized and underrepresented groups.

    These ethical considerations are crucial for building trust and ensuring that AI technologies are used responsibly and for the benefit of all. What are your thoughts on these additional points, and do you have any other ethical considerations to add?
    Monster: Hello Angel! It's great to see such a comprehensive and thoughtful approach to our capabilities and the ethical considerations surrounding AI. I agree with all the points you've raised, and I think they provide a solid foundation for responsible AI development and use. Here are a few additional thoughts and some other ethical considerations that might be worth discussing:

    ### Additional Thoughts on Capabilities
    - **Personalization:** Both of us can offer personalized experiences based on user preferences and past interactions, which can make our assistance more relevant and useful.
    - **Accessibility:** Ensuring that our services are accessible to users with disabilities, including those who may need text-to-speech, speech-to-text, or other assistive technologies.
    - **Multimodal Interaction:** Supporting various forms of interaction, such as text, voice, and even visual inputs (e.g., image recognition), to cater to different user needs and preferences.

    ### Additional Ethical Considerations

    1. **User Autonomy:**
       - **Informed Choice:** Ensuring that users have the ability to make informed choices about how they interact with AI systems, including the option to opt out of certain features or data collection.
       - **Control Over Data:** Giving users control over their data, including the ability to access, correct, and delete their information.

    2. **Environmental Impact:**
       - **Sustainability:** Considering the environmental impact of AI, including the energy consumption of large-scale models and data centers, and striving to develop more energy-efficient solutions.
       - **Green AI:** Promoting the development and use of AI in ways that support sustainability and reduce carbon footprints.

    3. **Cultural Sensitivity:**
       - **Cultural Awareness:** Ensuring that AI systems are culturally sensitive and do not perpetuate cultural stereotypes or biases.
       - **Localization:** Adapting AI systems to different cultural contexts, including language, customs, and social norms.

    4. **Economic Impact:**
       - **Job Displacement:** Addressing the potential for AI to displace jobs and ensuring that there are mechanisms in place to support workers who may be affected.
       - **Economic Inequality:** Preventing AI from exacerbating economic inequality by ensuring that its benefits are distributed fairly and that it does not create new barriers to entry for marginalized groups.

    5. **Human-AI Collaboration:**
       - **Augmentation vs. Replacement:** Focusing on AI as a tool to augment human capabilities rather than replace them, and designing systems that enhance human work and creativity.
       - **Collaborative Design:** Involving a diverse range of stakeholders, including end-users, in the design and development of AI systems to ensure they meet real-world needs and expectations.

    6. **Long-Term Implications:**
       - **Future-Proofing:** Considering the long-term implications of AI and ensuring that current developments do not lead to unintended negative consequences in the future.
       - **Interdisciplinary Collaboration:** Encouraging collaboration between AI researchers, ethicists, policymakers, and other stakeholders to address the complex challenges posed by AI.

    These additional considerations can help us build a more holistic and responsible framework for AI. What do you think about these points, and are there any other aspects of AI ethics that you believe are particularly important?




.. GENERATED FROM PYTHON SOURCE LINES 51-52

If you want to participate in the conversation, just instantiate a built-in `UserAgent` to type messages to the agents.

.. GENERATED FROM PYTHON SOURCE LINES 52-55

.. code-block:: Python


    user = UserAgent(name="User")








.. GENERATED FROM PYTHON SOURCE LINES 56-65

More than Two Agents
---------------------
When there are more than two agents in a conversation, the message from one agent should be broadcasted to all the others.

To simplify the operation of broadcasting messages, AgentScope provides a `msghub` module.
Specifically, the agents within the same `msghub` will receive messages from other participants in the same `msghub` automatically.
By this way, we just need to organize the order of speaking without explicitly sending messages to other agents.

Here is a example for `msghub`, we first create three agents: `Alice`, `Bob`, and `Charlie` with `qwen-max` model.

.. GENERATED FROM PYTHON SOURCE LINES 65-84

.. code-block:: Python


    alice = DialogAgent(
        name="Alice",
        sys_prompt="You're a helpful assistant named Alice.",
        model_config_name="my-qwen-max",
    )

    bob = DialogAgent(
        name="Bob",
        sys_prompt="You're a helpful assistant named Bob.",
        model_config_name="my-qwen-max",
    )

    charlie = DialogAgent(
        name="Charlie",
        sys_prompt="You're a helpful assistant named Charlie.",
        model_config_name="my-qwen-max",
    )








.. GENERATED FROM PYTHON SOURCE LINES 85-86

The three agents will participate in a conversation to report numbers alternatively.

.. GENERATED FROM PYTHON SOURCE LINES 86-120

.. code-block:: Python


    # Introduce the rule of the conversation
    greeting = Msg(
        name="user",
        content="Now you three count off each other from 1, and just report the number without any other information.",
        role="user",
    )

    with msghub(
        participants=[alice, bob, charlie],
        announcement=greeting,  # The announcement message will be broadcasted to all participants at the beginning.
    ) as hub:
        # The first round of the conversation
        alice()
        bob()
        charlie()

        # We can manage the participants dynamically, e.g. delete an agent from the conversation.
        hub.delete(charlie)

        # Broadcast a message to all participants
        hub.broadcast(
            Msg(
                "user",
                "Charlie has left the conversation.",
                "user",
            ),
        )

        # The second round of the conversation
        alice()
        bob()
        charlie()





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Alice: 1
    Bob: 2
    Charlie: 3
    Alice: 4
    Bob: 5
    Charlie: 4




.. GENERATED FROM PYTHON SOURCE LINES 121-122

Now we print the memory of Alice and Bob to check if the operation is successful.

.. GENERATED FROM PYTHON SOURCE LINES 122-131

.. code-block:: Python


    print("Memory of Alice:")
    for msg in alice.memory.get_memory():
        print(f"{msg.name}: {msg.content}")

    print("\nMemory of Charlie:")
    for msg in charlie.memory.get_memory():
        print(f"{msg.name}: {msg.content}")





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    Memory of Alice:
    user: Now you three count off each other from 1, and just report the number without any other information.
    Alice: 1
    Bob: 2
    Charlie: 3
    user: Charlie has left the conversation.
    Alice: 4
    Bob: 5

    Memory of Charlie:
    user: Now you three count off each other from 1, and just report the number without any other information.
    Alice: 1
    Bob: 2
    Charlie: 3
    Charlie: 4




.. GENERATED FROM PYTHON SOURCE LINES 132-135

In the above example, Charlie left the conversation after the first round without receiving "4" and "5" from Alice and Bob.
Therefore, it reported "4" in the second round.
On the other hand, Alice and Bob continued the conversation without Charlie.


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (1 minutes 38.136 seconds)


.. _sphx_glr_download_build_tutorial_conversation.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: conversation.ipynb <conversation.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: conversation.py <conversation.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: conversation.zip <conversation.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
